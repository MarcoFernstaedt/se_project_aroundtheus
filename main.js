!function(){"use strict";class e{constructor(e){let{name:t,link:s,userId:i,_id:r,ownerId:n,isLiked:o,handleImageClick:a,handleDeleteClick:l,handleLikeClick:d,cardSelector:c}=e;this._name=t,this._link=s,this._userId=i,this._cardId=r,this._ownerId=n,this._isLiked=o,this._handleImageClick=a,this._handleDeleteClick=l,this._handleLikeClick=d,this._cardSelector=c}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})})),this._cardElement.querySelector(".card__trashButton").addEventListener("click",(()=>this._handleDeleteClick(this)))}_renderLikes(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}setLikes(e){this._isLiked=e,this._renderLikes()}deleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._setEventListeners(),this._renderLikes(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputElems=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e,t){const s=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=e.validationMessage,s.classList.add(this._errorClass)}_hasInvalidInput(){return!this._inputElems.every((e=>e.validity.valid))}resetValidation(){this.toggleButtonState(),this._inputElems.forEach((e=>{this._hideInputError(e)}))}toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_setEventListeners(){this._inputElems.forEach(((e,t,s)=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){this._popup=document.querySelector(e)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__container-preview"))&&this.close(),e.target.classList.contains("modal__close")&&this.close()}))}}class i extends s{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popup.querySelector(".modal__form"),this._inputList=this._form.querySelectorAll(".modal__form-input"),this._submitButton=this._popup.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}_getInputValues(){return this._inputValues={},this._inputList.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues}setButtonText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonText}setEventListeners(){this._form.addEventListener("submit",(()=>{this._data=this._getInputValues(),this._handleFormSubmit(this._data)})),super.setEventListeners()}close(){this._form.reset(),super.close()}}class r{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._selector=t,this._section=document.querySelector(this._selector)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._section.prepend(e)}}const n=document.querySelector(".profile__avatar-button"),o=(document.querySelector(".profile__image"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector(".profile__edit-button")),a=document.querySelector(".profile__add-button"),l=(document.forms["profile-form"],document.forms["card-form"]),d=document.querySelector("#profile-title-input"),c=document.querySelector("#profile-description-input"),h=(l.querySelector("#card-title-input"),l.querySelector("#card-image-input"),"#edit-avatar-modal"),{apiToken:_,apiUrl:u}={apiToken:"2aecf13b-f884-4550-afc8-5336476728b3",apiUrl:"https://around-api.en.tripleten-services.com/v1"};let m=null;const p=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleResponce(e){if(e.ok)return e.json();Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._handleResponce)}editUserInfo(e){let{name:t,job:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._handleResponce)}editProfilePhoto(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(this._handleResponce)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._handleResponce)}createCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._handleResponce)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleResponce)}addCardLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._handleResponce)}removeCardLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._handleResponce)}}({baseUrl:u,headers:{authorization:_,"Content-Type":"application/json"}}),E=new class{constructor(e,t,s){this._nameElem=document.querySelector(e),this._jobElem=document.querySelector(t),this._avatarElem=document.querySelector(s)}getUserInfo(){return{name:this._nameElem.textContent,job:this._jobElem.textContent,avatar:this._avatarElem.src}}setUserInfo(e){let{name:t,job:s}=e;this._nameElem.textContent=t,this._jobElem.textContent=s}setAvatar(e){this._avatarElem.src=e,this._avatarElem.alt=this._nameElem.textContent}}(".profile__title",".profile__description",".profile__image"),f=e=>{b.setSubmitAction((()=>{b.setButtonText(!0),p.deleteCard(e._cardId).then((()=>{e.deleteCard(),b.close()})).catch((e=>{console.error(e)})).finally((()=>b.setButtonText(!1)))})),b.open()},v=e=>{e._isLiked?p.removeCardLike(e._cardId).then((()=>{e.setLikes(!1)})).catch((e=>{console.error(e)})):p.addCardLike(e._cardId).then((()=>{e.setLikes(!0)})).catch((e=>{console.error(e)}))},b=new class extends s{constructor(e){super(e),this._form=this._popup.querySelector(".modal__form"),this._submitButton=this._popup.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}open(){super.open()}close(){this._form.reset(),super.close()}setButtonText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";e?(console.log(this._submitButton),this._submitButton.textContent=t):this._submitButton.textContent=this._submitButtonText}setSubmitAction(e){this._handleFormSubmit=e}setEventListeners(){this._form.addEventListener("submit",(()=>{this._handleFormSubmit()})),super.setEventListeners()}}("#delete-modal");b.setEventListeners(),Promise.all([p.getUserInfo(),p.getInitialCards()]).then((e=>{let[t,s]=e;E.setUserInfo({name:t.name,job:t.about}),E.setAvatar(t.avatar),m=new r({items:s,renderer:e=>{m.addItem(S(e,null))}},".cards__list"),m.renderItems()})).catch((e=>{console.error(e)}));const k={};var L;L={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error-visible"},Array.from(document.querySelectorAll(L.formSelector)).forEach((e=>{const s=new t(L,e),i=e.getAttribute("name");k[i]=s,s.enableValidation()})),o.addEventListener("click",(()=>{const e=E.getUserInfo();d.value=e.name,c.value=e.job,g.open(),k["profile-form"].resetValidation()}));const S=(t,s)=>{let{name:i,link:r,_id:n,ownerId:o,isLiked:a}=t;return new e({name:i,link:r,userId:s,_id:n,ownerId:o,isLiked:a,handleImageClick:C,handleDeleteClick:f,handleLikeClick:v,cardSelector:"#card-template"}).getView()},C=e=>{let{name:t,link:s}=e;I.open({name:t,link:s})},y=new i(h,(e=>{y.setButtonText(!0),p.editProfilePhoto(e).then((e=>{E.setAvatar(e.avatar),y.close()})).catch((e=>{console.error(e)})).finally((()=>y.setButtonText()))}));y.setEventListeners();const I=new class extends s{constructor(e){super(e),this._title=this._popup.querySelector(".modal__caption"),this._image=this._popup.querySelector(".modal__image")}open(e){let{link:t,name:s}=e;this._title.textContent=s,this._image.src=t,this._image.alt=s,super.open()}}("#preview-card-modal");I.setEventListeners();const B=new i("#add-card-modal",(e=>{B.setButtonText(!0),p.createCard(e).then((e=>{m.addItem(S(e,null)),B.close()})).catch((e=>{console.error(e)})).finally((()=>B.setButtonText(!1)))}));B.setEventListeners();const g=new i("#edit-profile-modal",(e=>{g.setButtonText(!0),p.editUserInfo(e).then((e=>{E.setUserInfo({name:e.name,job:e.about}),g.close()})).then((()=>{console.log(E.getUserInfo())})).catch((e=>{console.error(e)})).finally((()=>g.setButtonText(!1)))}));g.setEventListeners(),n.addEventListener("click",(()=>{y.open(),k["avatar-form"].resetValidation()})),a.addEventListener("click",(()=>{B.open(),k["card-form"].resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTW1ILEVBQVksSUFBSWhILEVEckdELG1CQ3FHNkMrRixJQUNoRWlCLEVBQVVyRyxlQUFjLEdBQ3hCK0IsRUFDRzJCLFdBQVcwQixHQUNYdkMsTUFBTVUsSUFDTHpCLEVBQVFaLFFBQVFtRSxFQUFXOUIsRUEzSnBCLE9BNEpQOEMsRUFBVXRILE9BQU8sSUFFbEI0RixPQUFPQyxJQUNOQyxRQUFRQyxNQUFNRixFQUFJLElBRW5CRyxTQUFRLElBQU1zQixFQUFVckcsZUFBYyxJQUFPLElBRWxEcUcsRUFBVW5ILG9CQUVWLE1BQU00RyxFQUFlLElBQUl6RyxFRGxIRCx1QkNvSHJCaUgsSUFDQ1IsRUFBYTlGLGVBQWMsR0FDM0IrQixFQUNHZSxhQUFhd0QsR0FDYnpELE1BQU15RCxJQUNMdkMsRUFBU08sWUFBWSxDQUNuQi9LLEtBQU0rTSxFQUFZL00sS0FDbEJ5SixJQUFLc0QsRUFBWWpELFFBRW5CeUMsRUFBYS9HLE9BQU8sSUFFckI4RCxNQUFLLEtBQ0pnQyxRQUFRRyxJQUFJakIsRUFBU3BCLGNBQWMsSUFFcENnQyxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNRixFQUFJLElBRW5CRyxTQUFRLElBQU1lLEVBQWE5RixlQUFjLElBQU8sSUFHdkQ4RixFQUFhNUcsb0JBRWJrQyxFQUFhdEcsaUJBQWlCLFNBQVMsS0FDckNtTCxFQUFZaEgsT0FDWnFHLEVEckpvQixlQ3FKeUJwSCxpQkFBaUIsSUFHaEVvRCxFQUFXeEcsaUJBQWlCLFNBQVMsS0FDbkN1TCxFQUFVcEgsT0FDVnFHLEVEbEprQixhQ2tKeUJwSCxpQkFBaUIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgbmFtZSxcbiAgICBsaW5rLFxuICAgIHVzZXJJZCxcbiAgICBfaWQsXG4gICAgb3duZXJJZCxcbiAgICBpc0xpa2VkLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXG4gICAgaGFuZGxlTGlrZUNsaWNrLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgfSkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9jYXJkSWQgPSBfaWQ7XG4gICAgdGhpcy5fb3duZXJJZCA9IG93bmVySWQ7XG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIGxpa2UgYnV0dG9uXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcbiAgICB9KTtcblxuICAgIC8vIGRlbGV0ZSBidXR0b25cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hCdXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcykpO1xuICB9XG5cbiAgLy8gdG9nZ2xlTGlrZUJ1dHRvbigpIHtcbiAgLy8gICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xuICAvLyB9XG4gIFxuICBfcmVuZGVyTGlrZXMoKSB7XG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIHNldExpa2VzKGlzTGlrZWQpIHtcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpXG4gIH1cblxuICBkZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcblxuICAgICAgICB0aGlzLl9pbnB1dEVsZW1zID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgX2Rpc2FibGVCdXR0b24oKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH07XG5cbiAgICBfZW5hYmxlQnV0dG9uKCkge1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfTtcblxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW0pIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbS5pZH0tZXJyb3JgKVxuICAgICAgICBpbnB1dEVsZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvck1lc3NhZ2VFbGVtLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgZXJyb3JNZXNzYWdlRWxlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIH1cblxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtKSB7XG4gICAgICAgIGlmICghaW5wdXRFbGVtLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW0sIGVycm9yTWVzc2FnZSkge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtLmlkfS1lcnJvcmApXG4gICAgICAgIGlucHV0RWxlbS5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yTWVzc2FnZUVsZW0udGV4dENvbnRlbnQgPSBpbnB1dEVsZW0udmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICAgIGVycm9yTWVzc2FnZUVsZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB9XG5cbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxlbXMuZXZlcnkoKGlucHV0RWxlbSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0RWxlbS52YWxpZGl0eS52YWxpZDtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgICAgICB0aGlzLl9pbnB1dEVsZW1zLmZvckVhY2goKGlucHV0RWxlbSkgPT4ge1xuICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW0pXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgfTtcblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5faW5wdXRFbGVtcy5mb3JFYWNoKChpbnB1dEVsZW0sIGluZGV4LCBhcnJheSkgPT4ge1xuICAgICAgICAgICAgaW5wdXRFbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW0pO1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY29udGFpbmVyLXByZXZpZXdcIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRCdXR0b25UZXh0KHN1Ym1pdCwgYnV0dG9uVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcbiAgICBpZiAoc3VibWl0KSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9kYXRhID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZGF0YSk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7aXRlbXMsIHJlbmRlcmVyfSwgc2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fc2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXG4gICAgfTtcbiAgICBcbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBhZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5fc2VjdGlvbi5wcmVwZW5kKGl0ZW0pO1xuICAgIH07XG59O1xuIiwiY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGcgXCIsXG4gIH0sXG5dO1xuXG5jb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWJ1dHRvbicpO1xuY29uc3QgYXZhdGFySW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW1hZ2UnKTtcblxuY29uc3QgcHJvZmlsZVRpdGxlVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25UZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRBZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWZvcm1cIl07XG5jb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiY2FyZC1mb3JtXCJdO1xuXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIlxuKTtcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWxEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuXG5jb25zdCBjYXJkVGl0bGVJbnB1dCA9IGNhcmRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10aXRsZS1pbnB1dFwiKTtcbmNvbnN0IGNhcmRJbWFnZUlucHV0ID0gY2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlLWlucHV0XCIpO1xuLy8gaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NTAzMzA1NDUtODdjNjEwOWE4MWY1P2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0yNjcwJnE9ODBcblxuY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3ItdmlzaWJsZVwiLFxufTtcblxuY29uc3QgYXBpSW5mbyA9IHtcbiAgYXBpVG9rZW46IFwiMmFlY2YxM2ItZjg4NC00NTUwLWFmYzgtNTMzNjQ3NjcyOGIzXCIsXG4gIGFwaVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxufVxuXG5jb25zdCBzZWxlY3RvcnMgPSB7XG4gIGF2YXRhck1vZGFsU2VsZWN0b3I6IFwiI2VkaXQtYXZhdGFyLW1vZGFsXCIsXG4gIGF2YXRhckZvcm1TZWxlY3RvcjogXCJhdmF0YXItZm9ybVwiLFxuICB1c2VyQXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXG4gIHVzZXJOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXG4gIHVzZXJKb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbiAgaW1hZ2VNb2RhbFNlbGVjdG9yOiBcIiNwcmV2aWV3LWNhcmQtbW9kYWxcIixcbiAgY2FyZExpc3RTZWxlY3RvcjogXCIuY2FyZHNfX2xpc3RcIixcbiAgY2FyZFNlbGVjdG9yOiBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gIGNhcmRNb2RhbFNlbGVjdG9yOiBcIiNhZGQtY2FyZC1tb2RhbFwiLFxuICBjYXJkRm9ybVNlbGVjdG9yOiBcImNhcmQtZm9ybVwiLFxuICBwcm9maWxlTW9kYWxTZWxlY3RvcjogXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIsXG4gIHByb2ZpbGVGb3JtU2VsZWN0b3I6IFwicHJvZmlsZS1mb3JtXCIsXG4gIGNvbmZpcm1hdGlvbk1vZGFsU2VsZWN0b3I6IFwiI2RlbGV0ZS1tb2RhbFwiLFxufVxuXG5leHBvcnQge1xuICBhdmF0YXJCdXR0b24sXG4gIGF2YXRhckltYWdlLFxuICBjb25maWcsXG4gIGNhcmRJbWFnZUlucHV0LFxuICBjYXJkVGl0bGVJbnB1dCxcbiAgZWRpdFByb2ZpbGVNb2RhbERlc2NyaXB0aW9uSW5wdXQsXG4gIGVkaXRQcm9maWxlTW9kYWxUaXRsZUlucHV0LFxuICBjYXJkRm9ybSxcbiAgcHJvZmlsZUZvcm0sXG4gIGNhcmRBZGRCdG4sXG4gIHByb2ZpbGVFZGl0QnRuLFxuICBwcm9maWxlRGVzY3JpcHRpb25UZXh0LFxuICBwcm9maWxlVGl0bGVUZXh0LFxuICBzZWxlY3RvcnMsXG4gIGFwaUluZm8sXG59O1xuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHV1V2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IHtcbiAgYXZhdGFyQnV0dG9uLFxuICBhdmF0YXJJbWFnZSxcbiAgY29uZmlnLFxuICBlZGl0UHJvZmlsZU1vZGFsRGVzY3JpcHRpb25JbnB1dCxcbiAgZWRpdFByb2ZpbGVNb2RhbFRpdGxlSW5wdXQsXG4gIGNhcmRBZGRCdG4sXG4gIHByb2ZpbGVFZGl0QnRuLFxuICBzZWxlY3RvcnMsXG4gIGFwaUluZm8sXG4gIHByb2ZpbGVUaXRsZVRleHQsXG4gIHByb2ZpbGVEZXNjcmlwdGlvblRleHQsXG59IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5jb25zdCB7IGFwaVRva2VuLCBhcGlVcmwgfSA9IGFwaUluZm87XG5sZXQgdXNlcklkID0gbnVsbDtcbmxldCBzZWN0aW9uID0gbnVsbDtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IGFwaVVybCxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IGFwaVRva2VuLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICBzZWxlY3RvcnMudXNlck5hbWVTZWxlY3RvcixcbiAgc2VsZWN0b3JzLnVzZXJKb2JTZWxlY3RvcixcbiAgc2VsZWN0b3JzLnVzZXJBdmF0YXJTZWxlY3RvclxuKTtcblxuY29uc3QgaGFuZGxlRGVsZXRlQ2xpY2sgPSAoY2FyZCkgPT4ge1xuICBjb25maXJtYXRpb25Nb2RhbC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xuICAgIGNvbmZpcm1hdGlvbk1vZGFsLnNldEJ1dHRvblRleHQodHJ1ZSk7XG4gICAgYXBpXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkLl9jYXJkSWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgICAgICBjb25maXJtYXRpb25Nb2RhbC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiBjb25maXJtYXRpb25Nb2RhbC5zZXRCdXR0b25UZXh0KGZhbHNlKSk7XG4gIH0pO1xuICBjb25maXJtYXRpb25Nb2RhbC5vcGVuKCk7XG59O1xuXG5jb25zdCBoYW5kbGVMaWtlQ2xpY2sgPSAoY2FyZCkgPT4ge1xuICBpZiAoY2FyZC5faXNMaWtlZCkge1xuICAgIGFwaVxuICAgICAgLnJlbW92ZUNhcmRMaWtlKGNhcmQuX2NhcmRJZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC5zZXRMaWtlcyhmYWxzZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgYXBpXG4gICAgICAuYWRkQ2FyZExpa2UoY2FyZC5fY2FyZElkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLnNldExpa2VzKHRydWUpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICB9XG59O1xuXG5jb25zdCBjb25maXJtYXRpb25Nb2RhbCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXG4gIHNlbGVjdG9ycy5jb25maXJtYXRpb25Nb2RhbFNlbGVjdG9yXG4pO1xuY29uZmlybWF0aW9uTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxuICAudGhlbigoW2RhdGEsIGNhcmRzXSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgIGpvYjogZGF0YS5hYm91dCxcbiAgICB9KTtcblxuICAgIHVzZXJJbmZvLnNldEF2YXRhcihkYXRhLmF2YXRhcik7XG5cbiAgICBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcbiAgICAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgICAgICAgIHNlY3Rpb24uYWRkSXRlbShyZW5kZXJDYXJkKGNhcmREYXRhLCB1c2VySWQpKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBzZWxlY3RvcnMuY2FyZExpc3RTZWxlY3RvclxuICAgICk7XG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfSk7XG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW0pID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtKTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG5cbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuZW5hYmxlVmFsaWRhdGlvbihjb25maWcpO1xuXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcblxuICBlZGl0UHJvZmlsZU1vZGFsVGl0bGVJbnB1dC52YWx1ZSA9IGluZm8ubmFtZTtcbiAgZWRpdFByb2ZpbGVNb2RhbERlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBpbmZvLmpvYjtcblxuICBwcm9maWxlTW9kYWwub3BlbigpO1xuICBmb3JtVmFsaWRhdG9yc1tcInByb2ZpbGUtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5jb25zdCByZW5kZXJDYXJkID0gKHsgbmFtZSwgbGluaywgX2lkLCBvd25lcklkLCBpc0xpa2VkIH0sIHVzZXJJZCkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgIG5hbWUsXG4gICAgbGluayxcbiAgICB1c2VySWQsXG4gICAgX2lkLFxuICAgIG93bmVySWQsXG4gICAgaXNMaWtlZCxcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxuICAgIGhhbmRsZUxpa2VDbGljayxcbiAgICBjYXJkU2VsZWN0b3I6IHNlbGVjdG9ycy5jYXJkU2VsZWN0b3IsXG4gIH0pO1xuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59O1xuXG5jb25zdCBoYW5kbGVJbWFnZUNsaWNrID0gKHsgbmFtZSwgbGluayB9KSA9PiB7XG4gIGltYWdlTW9kYWwub3Blbih7IG5hbWUsIGxpbmsgfSk7XG59O1xuXG5jb25zdCBhdmF0YXJNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBzZWxlY3RvcnMuYXZhdGFyTW9kYWxTZWxlY3RvcixcbiAgKGF2YXRhckRhdGEpID0+IHtcbiAgICBhdmF0YXJNb2RhbC5zZXRCdXR0b25UZXh0KHRydWUpO1xuICAgIGFwaVxuICAgICAgLmVkaXRQcm9maWxlUGhvdG8oYXZhdGFyRGF0YSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihkYXRhLmF2YXRhcik7XG4gICAgICAgIGF2YXRhck1vZGFsLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IGF2YXRhck1vZGFsLnNldEJ1dHRvblRleHQoKSk7XG4gIH1cbik7XG5hdmF0YXJNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBpbWFnZU1vZGFsID0gbmV3IFBvcHV1V2l0aEltYWdlKHNlbGVjdG9ycy5pbWFnZU1vZGFsU2VsZWN0b3IpO1xuaW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBjYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMuY2FyZE1vZGFsU2VsZWN0b3IsIChjYXJkRGF0YSkgPT4ge1xuICBjYXJkTW9kYWwuc2V0QnV0dG9uVGV4dCh0cnVlKTtcbiAgYXBpXG4gICAgLmNyZWF0ZUNhcmQoY2FyZERhdGEpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHNlY3Rpb24uYWRkSXRlbShyZW5kZXJDYXJkKGRhdGEsIHVzZXJJZCkpO1xuICAgICAgY2FyZE1vZGFsLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4gY2FyZE1vZGFsLnNldEJ1dHRvblRleHQoZmFsc2UpKTtcbn0pO1xuY2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHByb2ZpbGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBzZWxlY3RvcnMucHJvZmlsZU1vZGFsU2VsZWN0b3IsXG4gIChwcm9maWxlRGF0YSkgPT4ge1xuICAgIHByb2ZpbGVNb2RhbC5zZXRCdXR0b25UZXh0KHRydWUpO1xuICAgIGFwaVxuICAgICAgLmVkaXRVc2VySW5mbyhwcm9maWxlRGF0YSlcbiAgICAgIC50aGVuKChwcm9maWxlRGF0YSkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgICAgbmFtZTogcHJvZmlsZURhdGEubmFtZSxcbiAgICAgICAgICBqb2I6IHByb2ZpbGVEYXRhLmFib3V0LFxuICAgICAgICB9KTtcbiAgICAgICAgcHJvZmlsZU1vZGFsLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyh1c2VySW5mby5nZXRVc2VySW5mbygpKVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiBwcm9maWxlTW9kYWwuc2V0QnV0dG9uVGV4dChmYWxzZSkpO1xuICB9XG4pO1xucHJvZmlsZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhdmF0YXJNb2RhbC5vcGVuKCk7XG4gIGZvcm1WYWxpZGF0b3JzW3NlbGVjdG9ycy5hdmF0YXJGb3JtU2VsZWN0b3JdLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbmNhcmRBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2FyZE1vZGFsLm9wZW4oKTtcbiAgZm9ybVZhbGlkYXRvcnNbc2VsZWN0b3JzLmNhcmRGb3JtU2VsZWN0b3JdLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgX2hhbmRsZVJlc3BvbmNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uY2UpO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKHtuYW1lLCBqb2J9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogam9iLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25jZSk7XG4gIH1cblxuICBlZGl0UHJvZmlsZVBob3RvKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25jZSk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbmNlKTtcbiAgfVxuXG4gIGNyZWF0ZUNhcmQoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGxpbms6IGRhdGEubGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uY2UpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbmNlKTtcbiAgfVxuXG4gIGFkZENhcmRMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uY2UpO1xuICB9XG5cbiAgcmVtb3ZlQ2FyZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25jZSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2JFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtLnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtLnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXJFbGVtLnNyYyxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9qb2JFbGVtLnRleHRDb250ZW50ID0gam9iO1xuICB9XG5cbiAgc2V0QXZhdGFyKGF2YXRhcikge1xuICAgIHRoaXMuX2F2YXRhckVsZW0uc3JjID0gYXZhdGFyO1xuICAgIHRoaXMuX2F2YXRhckVsZW0uYWx0ID0gdGhpcy5fbmFtZUVsZW0udGV4dENvbnRlbnQ7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbicpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG5cbiAgc2V0QnV0dG9uVGV4dChzdWJtaXQsIGJ1dHRvblRleHQgPSBcIlNhdmluZy4uLlwiKSB7XG4gICAgaWYgKHN1Ym1pdCkge1xuICAgICAgY29uc29sZS5sb2codGhpcy5fc3VibWl0QnV0dG9uKVxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcbiAgICB9XG4gIH1cblxuICBzZXRTdWJtaXRBY3Rpb24oY2FsbGJhY2spIHtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gY2FsbGJhY2s7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICB9O1xuXG4gIG9wZW4oeyBsaW5rLCBuYW1lIH0pIHtcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfTtcbn07XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsIm5hbWUiLCJsaW5rIiwidXNlcklkIiwiX2lkIiwib3duZXJJZCIsImlzTGlrZWQiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJjYXJkU2VsZWN0b3IiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl91c2VySWQiLCJfY2FyZElkIiwiX293bmVySWQiLCJfaXNMaWtlZCIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9jYXJkU2VsZWN0b3IiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2FyZEltYWdlIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9yZW5kZXJMaWtlcyIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInNldExpa2VzIiwiZGVsZXRlQ2FyZCIsImdldFZpZXciLCJkb2N1bWVudCIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRFbGVtcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX2Rpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfaGlkZUlucHV0RXJyb3IiLCJpbnB1dEVsZW0iLCJlcnJvck1lc3NhZ2VFbGVtIiwiaWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsImV2ZXJ5IiwicmVzZXRWYWxpZGF0aW9uIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5kZXgiLCJhcnJheSIsImV2dCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImtleSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfaW5wdXRMaXN0IiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic2V0QnV0dG9uVGV4dCIsInN1Ym1pdCIsImJ1dHRvblRleHQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJfZGF0YSIsInJlc2V0IiwiU2VjdGlvbiIsInNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9zZWxlY3RvciIsIl9zZWN0aW9uIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJhdmF0YXJCdXR0b24iLCJwcm9maWxlRWRpdEJ0biIsImNhcmRBZGRCdG4iLCJjYXJkRm9ybSIsImZvcm1zIiwiZWRpdFByb2ZpbGVNb2RhbFRpdGxlSW5wdXQiLCJlZGl0UHJvZmlsZU1vZGFsRGVzY3JpcHRpb25JbnB1dCIsInNlbGVjdG9ycyIsImFwaVRva2VuIiwiYXBpVXJsIiwic2VjdGlvbiIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVSZXNwb25jZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwidGhlbiIsImVkaXRVc2VySW5mbyIsIl9yZWYyIiwiam9iIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImVkaXRQcm9maWxlUGhvdG8iLCJkYXRhIiwiYXZhdGFyIiwiZ2V0SW5pdGlhbENhcmRzIiwiY3JlYXRlQ2FyZCIsImNhcmRJZCIsImFkZENhcmRMaWtlIiwicmVtb3ZlQ2FyZExpa2UiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVFbGVtIiwiX2pvYkVsZW0iLCJfYXZhdGFyRWxlbSIsInNldFVzZXJJbmZvIiwic2V0QXZhdGFyIiwiY2FyZCIsImNvbmZpcm1hdGlvbk1vZGFsIiwic2V0U3VibWl0QWN0aW9uIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJmaW5hbGx5IiwibG9nIiwiY2FsbGJhY2siLCJhbGwiLCJjYXJkcyIsImNhcmREYXRhIiwicmVuZGVyQ2FyZCIsImZvcm1WYWxpZGF0b3JzIiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiZm9ybUVsZW0iLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImluZm8iLCJwcm9maWxlTW9kYWwiLCJfcmVmMyIsImltYWdlTW9kYWwiLCJhdmF0YXJNb2RhbCIsImF2YXRhckRhdGEiLCJfdGl0bGUiLCJfaW1hZ2UiLCJjYXJkTW9kYWwiLCJwcm9maWxlRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=